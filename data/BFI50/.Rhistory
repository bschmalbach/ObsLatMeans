library(lavaan)
df <- read.csv("data.csv",sep = "\t")
df <- df[df$gender %in% c(1,2),]
remove <- rowSums(df[,8:57]==0)>0
df <- df[-remove,]
#recode items
rec_vec <- c(2,4,6,12,14,16,18,22,24,26,28,30,32,34,36,38:40,42,44)
for (i in rec_vec) {
df[,i+7] <- (df[,i+7]-6)*(-1)
}
model <- "O =~ NA*O1 + O2 + O3 + O4 + O5 + O6 + O7 + O8 + O9 + O10
C =~ NA*C1 + C2 + C3 + C4 + C5 + C6 + C7 + C8 + C9 + C10
E =~ NA*E1 + E2 + E3 + E4 + E5 + E6 + E7 + E8 + E9 + E10
A =~ NA*A1 + A2 + A3 + A4 + A5 + A6 + A7 + A8 + A9 + A10
N =~ NA*N1 + N2 + N3 + N4 + N5 + N6 + N7 + N8 + N9 + N10
O ~~ 1*O
C ~~ 1*C
E ~~ 1*E
A ~~ 1*A
N ~~ 1*N"
fit <- sem(model, df, estimator="mlr", group = "gender", group.equal=c("loadings", "intercepts", "residuals"))
lavInspect(fit, what="std")
fit <- sem(model, df[1:500,], estimator="mlr")
lavInspect(fit, what="std")
df <- read.csv("data.csv",sep = "\t")
df <- df[df$gender %in% c(1,2),]
remove <- rowSums(df[,8:57]==0)>0
df <- df[-remove,]
#recode items
rec_vec <- c(2,4,12,14,16,18,19,20,22,24,26,32,34,36,38,40,42,44,46,48)
for (i in rec_vec) {
df[,i+7] <- (df[,i+7]-6)*(-1)
}
model <- "O =~ NA*O1 + O2 + O3 + O4 + O5 + O6 + O7 + O8 + O9 + O10
C =~ NA*C1 + C2 + C3 + C4 + C5 + C6 + C7 + C8 + C9 + C10
E =~ NA*E1 + E2 + E3 + E4 + E5 + E6 + E7 + E8 + E9 + E10
A =~ NA*A1 + A2 + A3 + A4 + A5 + A6 + A7 + A8 + A9 + A10
N =~ NA*N1 + N2 + N3 + N4 + N5 + N6 + N7 + N8 + N9 + N10
O ~~ 1*O
C ~~ 1*C
E ~~ 1*E
A ~~ 1*A
N ~~ 1*N"
fit <- sem(model, df[1:500,], estimator="mlr")
lavInspect(fit, what="std")
View(df)
df <- read.csv("data.csv",sep = "\t")
df <- df[df$gender %in% c(1,2),]
remove <- rowSums(df[,8:57]==0)>0
df <- df[-remove,]
model <- "O =~ NA*O1 + O2 + O3 + O4 + O5 + O6 + O7 + O8 + O9 + O10
C =~ NA*C1 + C2 + C3 + C4 + C5 + C6 + C7 + C8 + C9 + C10
E =~ NA*E1 + E2 + E3 + E4 + E5 + E6 + E7 + E8 + E9 + E10
A =~ NA*A1 + A2 + A3 + A4 + A5 + A6 + A7 + A8 + A9 + A10
N =~ NA*N1 + N2 + N3 + N4 + N5 + N6 + N7 + N8 + N9 + N10
O ~~ 1*O
C ~~ 1*C
E ~~ 1*E
A ~~ 1*A
N ~~ 1*N"
fit <- sem(model, df[1:500,], estimator="mlr")
lavInspect(fit, what="std")
library(lavaan)
df <- read.csv("data.csv",sep = "\t")
df <- df[df$gender %in% c(1,2),]
remove <- rowSums(df[,8:57]==0)>0
df <- df[-remove,]
#recode items
rec_vec <- c(2,4,6,8,10,12,14,22,24,26,28:30,32,34,36,38,42,44,46)
for (i in rec_vec) {
df[,i+7] <- (df[,i+7]-6)*(-1)
}
model <- "O =~ NA*O1 + O2 + O3 + O4 + O5 + O6 + O7 + O8 + O9 + O10
C =~ NA*C1 + C2 + C3 + C4 + C5 + C6 + C7 + C8 + C9 + C10
E =~ NA*E1 + E2 + E3 + E4 + E5 + E6 + E7 + E8 + E9 + E10
A =~ NA*A1 + A2 + A3 + A4 + A5 + A6 + A7 + A8 + A9 + A10
N =~ NA*N1 + N2 + N3 + N4 + N5 + N6 + N7 + N8 + N9 + N10
O ~~ 1*O
C ~~ 1*C
E ~~ 1*E
A ~~ 1*A
N ~~ 1*N"
fit <- sem(model, df[1:500,], estimator="mlr")
lavInspect(fit, what="std")
#observed score vs latent score, gender diffs
rm(list=ls())
library(lavaan)
df <- read.csv("data.csv",sep = "\t")
df <- df[df$gender %in% c(1,2),]
remove <- rowSums(df[,8:57]==0)>0
df <- df[-remove,]
#recode items
rec_vec <- c(2,4,6,8,10,12,14,22,24,26,28:30,32,34,36,38,42,44,46)
for (i in rec_vec) {
df[,i+7] <- (df[,i+7]-6)*(-1)
}
model <- "O =~ NA*O1 + O2 + O3 + O4 + O5 + O6 + O7 + O8 + O9 + O10
C =~ NA*C1 + C2 + C3 + C4 + C5 + C6 + C7 + C8 + C9 + C10
E =~ NA*E1 + E2 + E3 + E4 + E5 + E6 + E7 + E8 + E9 + E10
A =~ NA*A1 + A2 + A3 + A4 + A5 + A6 + A7 + A8 + A9 + A10
N =~ NA*N1 + N2 + N3 + N4 + N5 + N6 + N7 + N8 + N9 + N10
O ~~ 1*O
C ~~ 1*C
E ~~ 1*E
A ~~ 1*A
N ~~ 1*N"
fit <- sem(model, df, estimator="mlr", group = "gender", group.equal=c("loadings", "intercepts", "residuals"))
lat <- lavInspect(fit, what="std")$`2`$alpha
#obs diff
df$O_sum <- rowSums(df[c("O1", "O2", "O3", "O4", "O5", "O6", "O7", "O8", "O9", "O10")])
df$C_sum <- rowSums(df[c("C1", "C2", "C3", "C4", "C5", "C6", "C7", "C8", "C9", "C10")])
df$E_sum <- rowSums(df[c("E1", "E2", "E3", "E4", "E5", "E6", "E7", "E8", "E9", "E10")])
df$A_sum <- rowSums(df[c("A1", "A2", "A3", "A4", "A5", "A6", "A7", "A8", "A9", "A10")])
df$N_sum <- rowSums(df[c("N1", "N2", "N3", "N4", "N5", "N6", "N7", "N8", "N9", "N10")])
get_d <- function(x){
v1 <- x[df$gender==1]
v2 <- x[df$gender==2]
mean_diff <- mean(v1)-mean(v2)
pool_sd <- sqrt((var(v1)+var(v2))/2)
d <- mean_diff/pool_sd
return(d)
}
obs <- c(get_d(df$O_sum),
get_d(df$C_sum),
get_d(df$E_sum),
get_d(df$A_sum),
get_d(df$N_sum))
res <- cbind(lat, obs)
res
lat <- lavInspect(fit, what="std")$`1`$alpha
lat
res <- cbind(lat, obs)
res
fitmeasures(fit, fit.measures = c("chisq.scaled", "df", "pvalue", "cfi.robust", "tli.robust", "rmsea.robust", "srmr"))
#observed score vs latent score, gender diffs
rm(list=ls())
library(lavaan)
df <- read.csv("data.csv",sep = "\t")
df <- df[df$gender %in% c(1,2),]
remove <- rowSums(df[,8:57]==0)>0
df <- df[-remove,]
#recode items
rec_vec <- c(2,4,6,8,10,12,14,22,24,26,28:30,32,34,36,38,42,44,46)
for (i in rec_vec) {
df[,i+7] <- (df[,i+7]-6)*(-1)
}
model <- "O =~ NA*O1 + O2 + O3 + O4 + O5 + O6 + O7 + O8 + O9 + O10
C =~ NA*C1 + C2 + C3 + C4 + C5 + C6 + C7 + C8 + C9 + C10
E =~ NA*E1 + E2 + E3 + E4 + E5 + E6 + E7 + E8 + E9 + E10
A =~ NA*A1 + A2 + A3 + A4 + A5 + A6 + A7 + A8 + A9 + A10
N =~ NA*N1 + N2 + N3 + N4 + N5 + N6 + N7 + N8 + N9 + N10
O ~~ 1*O
C ~~ 1*C
E ~~ 1*E
A ~~ 1*A
N ~~ 1*N"
fit <- sem(model, df, estimator="mlr", group = "gender", group.equal=c("loadings", "intercepts", "residuals"))
lat <- lavInspect(fit, what="std")$`1`$alpha
lat
lavPredict(fit)
#obs diff
df$O_sum <- rowSums(df[c("O1", "O2", "O3", "O4", "O5", "O6", "O7", "O8", "O9", "O10")])
df$C_sum <- rowSums(df[c("C1", "C2", "C3", "C4", "C5", "C6", "C7", "C8", "C9", "C10")])
df$E_sum <- rowSums(df[c("E1", "E2", "E3", "E4", "E5", "E6", "E7", "E8", "E9", "E10")])
df$A_sum <- rowSums(df[c("A1", "A2", "A3", "A4", "A5", "A6", "A7", "A8", "A9", "A10")])
df$N_sum <- rowSums(df[c("N1", "N2", "N3", "N4", "N5", "N6", "N7", "N8", "N9", "N10")])
get_d <- function(x){
v1 <- x[df$gender==1]
v2 <- x[df$gender==2]
diffs <- v1-v2
pool_sd <- sqrt((var(v1)+var(v2))/2)
d <- diffs/pool_sd
return(d)
}
obs <- c(get_d(df$O_sum),
get_d(df$C_sum),
get_d(df$E_sum),
get_d(df$A_sum),
get_d(df$N_sum))
#obs diff
df$O_sum <- scale(rowSums(df[c("O1", "O2", "O3", "O4", "O5", "O6", "O7", "O8", "O9", "O10")]))
df$C_sum <- scale(rowSums(df[c("C1", "C2", "C3", "C4", "C5", "C6", "C7", "C8", "C9", "C10")]))
df$E_sum <- scale(rowSums(df[c("E1", "E2", "E3", "E4", "E5", "E6", "E7", "E8", "E9", "E10")]))
df$A_sum <- scale(rowSums(df[c("A1", "A2", "A3", "A4", "A5", "A6", "A7", "A8", "A9", "A10")]))
df$N_sum <- scale(rowSums(df[c("N1", "N2", "N3", "N4", "N5", "N6", "N7", "N8", "N9", "N10")]))
obs <- cbind(df$O_sum,
df$C_sum,
df$E_sum,
df$A_sum,
df$N_sum)
lat <- lavPredict(fit)
View(lat)
obs <- list(cbind(df$O_sum[df$gender==2,], df$C_sum[df$gender==2,], df$E_sum[df$gender==2,], df$A_sum[df$gender==2,], df$N_sum[df$gender==2,]),
cbind(df$O_sum[df$gender==1,], df$C_sum[df$gender==1,], df$E_sum[df$gender==1,], df$A_sum[df$gender==1,], df$N_sum[df$gender==1,]))
lat <- lavInspect(fit, what="std")
lavInspect(fit, what="std")$`1`$alpha
get_d
lat <- lavInspect(fit, what="std")$`1`$alpha
#obs diff
df$O_sum <- scale(rowSums(df[c("O1", "O2", "O3", "O4", "O5", "O6", "O7", "O8", "O9", "O10")]))
df$C_sum <- scale(rowSums(df[c("C1", "C2", "C3", "C4", "C5", "C6", "C7", "C8", "C9", "C10")]))
df$E_sum <- scale(rowSums(df[c("E1", "E2", "E3", "E4", "E5", "E6", "E7", "E8", "E9", "E10")]))
df$A_sum <- scale(rowSums(df[c("A1", "A2", "A3", "A4", "A5", "A6", "A7", "A8", "A9", "A10")]))
df$N_sum <- scale(rowSums(df[c("N1", "N2", "N3", "N4", "N5", "N6", "N7", "N8", "N9", "N10")]))
get_d <- function(x){
v1 <- x[df$gender==1]
v2 <- x[df$gender==2]
diffs <- v1-v2
pool_sd <- sqrt((var(v1)+var(v2))/2)
d <- diffs/pool_sd
return(d)
}
obs <- get_d(c(df$O_sum,
df$C_sum,
df$E_sum,
df$A_sum,
df$N_sum))
get_d <- function(x){
v1 <- x[df$gender==1]
v2 <- x[df$gender==2]
diffs <- mean(v1)-mean(v2)
pool_sd <- sqrt((var(v1)+var(v2))/2)
d <- diffs/pool_sd
return(d)
}
obs <- get_d(c(df$O_sum,
df$C_sum,
df$E_sum,
df$A_sum,
df$N_sum))
res <- cbind(lat, obs)
res
get_d <- function(x){
v1 <- x[df$gender==1]
v2 <- x[df$gender==2]
diffs <- mean(v1)-mean(v2)
pool_sd <- sqrt((var(v1)+var(v2))/2)
d <- diffs/pool_sd
return(d)
}
#obs diff
df$O_sum <- scale(rowSums(df[c("O1", "O2", "O3", "O4", "O5", "O6", "O7", "O8", "O9", "O10")]))
df$C_sum <- scale(rowSums(df[c("C1", "C2", "C3", "C4", "C5", "C6", "C7", "C8", "C9", "C10")]))
df$E_sum <- scale(rowSums(df[c("E1", "E2", "E3", "E4", "E5", "E6", "E7", "E8", "E9", "E10")]))
df$A_sum <- scale(rowSums(df[c("A1", "A2", "A3", "A4", "A5", "A6", "A7", "A8", "A9", "A10")]))
df$N_sum <- scale(rowSums(df[c("N1", "N2", "N3", "N4", "N5", "N6", "N7", "N8", "N9", "N10")]))
get_d <- function(x){
v1 <- x[df$gender==1]
v2 <- x[df$gender==2]
diffs <- mean(v1)-mean(v2)
pool_sd <- sqrt((var(v1)+var(v2))/2)
d <- diffs/pool_sd
return(d)
}
obs <- get_d(c(df$O_sum,
df$C_sum,
df$E_sum,
df$A_sum,
df$N_sum))
res <- cbind(lat, obs)
res
get_d <- function(x){
v1 <- x[df$gender==1]
v2 <- x[df$gender==2]
mean_diff <- mean(v1)-mean(v2)
pool_sd <- sqrt((var(v1)+var(v2))/2)
d <- mean_diff/pool_sd
return(d)
}
obs <- c(get_d(df$O_sum),
get_d(df$C_sum),
get_d(df$E_sum),
get_d(df$A_sum),
get_d(df$N_sum))
res <- cbind(lat, obs)
res
n_groups <- c(length(df$gender==1), length(df$gender==2))
res <- data.frame(cbind(lat, obs))
res
res$ave <- rowMeans(res)
res
res$ave <- rowMeans(res)
res
n_groups <- c(length(df$gender==1), length(df$gender==2))
n_groups
n_groups <- c(length(df[df$gender==1,]), length(df[df$gender==2,]))
n_groups
sum(df$gender==1)
n_groups <- c(sum(df$gender==1), sum(df$gender==2))
n_groups
n_g <- c(sum(df$gender==1), sum(df$gender==2))
(n_g[1]+n_g[2])/(n_g[1]*n_g[2])
((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res[1,1]^2 / (2*(n_g[1]+n_g[2])))
(res[1,1]^2 / (2*(n_g[1]+n_g[2])))
res[1,1]
(2*(n_g[1]+n_g[2]))
var1 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res[1,1]^2 / (2*(n_g[1]+n_g[2])))
var2 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res[1,2]^2 / (2*(n_g[1]+n_g[2])))
res$var1 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res[,1]^2 / (2*(n_g[1]+n_g[2])))
res$var2 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res[,2]^2 / (2*(n_g[1]+n_g[2])))
res
res$Q <- (res$intercept-res$ave)^2/res$var1 + (res$obs-res$ave)^2/res$var2
res
res$chi <- pchisq(res$Q, df=1)
res
res$chi <- pchisq(res$Q, df=1, lower.tail = T)
res
res$chi <- pchisq(res$Q, df=1, lower.tail = F)
res
res <- data.frame(cbind(lat, obs))
res
#compare
n_g <- c(sum(df$gender==1), sum(df$gender==2))
res$ave <- rowMeans(res)
res$var1 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$intercept^2 / (2*(n_g[1]+n_g[2])))
res$var2 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$obs^2 / (2*(n_g[1]+n_g[2])))
res
res <- data.frame(cbind(lat, obs))
res
#compare
n_g <- c(sum(df$gender==1), sum(df$gender==2))
res$ave <- res$intercept-res$obs
res$var1 <- (((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$intercept^2 / (2*(n_g[1]+n_g[2])))
res$var2 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$obs^2 / (2*(n_g[1]+n_g[2])))
res$z <-
res$var1 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$intercept^2 / (2*(n_g[1]+n_g[2]))
res$z <-
res$var1 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$intercept^2 / (2*(n_g[1]+n_g[2])))
res$var2 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$obs^2 / (2*(n_g[1]+n_g[2])))
res <- data.frame(cbind(lat, obs))
res
n_g <- c(sum(df$gender==1), sum(df$gender==2))
res$diff <- res$intercept-res$obs
res$var1 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$intercept^2 / (2*(n_g[1]+n_g[2])))
res$var2 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$obs^2 / (2*(n_g[1]+n_g[2])))
res$pool_sd <- sqrt((var1+var2)/2)
res
res$z <- res$diff/(res$pool_sd/sqrt(sum(n_g)))
res
res$dd <- res$diff/(res$pool_sd)
res
pnorm(1.96)
(1-pnorm(1.96))
res <- data.frame(cbind(lat, obs))
res
#compare
n_g <- c(sum(df$gender==1), sum(df$gender==2))
res$diff <- res$intercept-res$obs
res$var1 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$intercept^2 / (2*(n_g[1]+n_g[2])))
res$var2 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$obs^2 / (2*(n_g[1]+n_g[2])))
res$pool_sd <- sqrt((var1+var2)/2)
res$z <- res$diff/(res$pool_sd/sqrt(sum(n_g)))
res$p <- 2*(1-pnorm(res$z))
res$dd <- res$diff/(res$pool_sd)
res
res$p <- 2*(1-pnorm(abs(res$z)))
res
rm(list=ls())
library(lavaan)
df <- read.csv("data.csv",sep = "\t")
df <- df[df$gender %in% c(1,2),]
remove <- rowSums(df[,8:57]==0)>0
df <- df[-remove,]
#recode items
rec_vec <- c(2,4,6,8,10,12,14,22,24,26,28:30,32,34,36,38,42,44,46)
for (i in rec_vec) {
df[,i+7] <- (df[,i+7]-6)*(-1)
}
model <- "O =~ NA*O1 + O2 + O3 + O4 + O5 + O6 + O7 + O8 + O9 + O10
C =~ NA*C1 + C2 + C3 + C4 + C5 + C6 + C7 + C8 + C9 + C10
E =~ NA*E1 + E2 + E3 + E4 + E5 + E6 + E7 + E8 + E9 + E10
A =~ NA*A1 + A2 + A3 + A4 + A5 + A6 + A7 + A8 + A9 + A10
N =~ NA*N1 + N2 + N3 + N4 + N5 + N6 + N7 + N8 + N9 + N10
O ~~ 1*O
C ~~ 1*C
E ~~ 1*E
A ~~ 1*A
N ~~ 1*N"
fit <- sem(model, df, estimator="mlr", group = "gender", group.equal=c("loadings", "intercepts", "residuals"))
lat <- lavInspect(fit, what="std")$`1`$alpha
#obs diff
df$O_sum <- scale(rowSums(df[c("O1", "O2", "O3", "O4", "O5", "O6", "O7", "O8", "O9", "O10")]))
df$C_sum <- scale(rowSums(df[c("C1", "C2", "C3", "C4", "C5", "C6", "C7", "C8", "C9", "C10")]))
df$E_sum <- scale(rowSums(df[c("E1", "E2", "E3", "E4", "E5", "E6", "E7", "E8", "E9", "E10")]))
df$A_sum <- scale(rowSums(df[c("A1", "A2", "A3", "A4", "A5", "A6", "A7", "A8", "A9", "A10")]))
df$N_sum <- scale(rowSums(df[c("N1", "N2", "N3", "N4", "N5", "N6", "N7", "N8", "N9", "N10")]))
get_d <- function(x){
v1 <- x[df$gender==1]
v2 <- x[df$gender==2]
mean_diff <- mean(v1)-mean(v2)
pool_sd <- sqrt((var(v1)+var(v2))/2)
d <- mean_diff/pool_sd
return(d)
}
obs <- c(get_d(df$O_sum),
get_d(df$C_sum),
get_d(df$E_sum),
get_d(df$A_sum),
get_d(df$N_sum))
res <- data.frame(cbind(lat, obs))
res
#compare
n_g <- c(sum(df$gender==1), sum(df$gender==2))
res$diff <- res$intercept-res$obs
res$var1 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$intercept^2 / (2*(n_g[1]+n_g[2])))
res$var2 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$obs^2 / (2*(n_g[1]+n_g[2])))
res$pool_sd <- sqrt((var1+var2)/2)
res$z <- res$diff/(res$pool_sd/sqrt(sum(n_g)))
res$p <- 2*(1-pnorm(abs(res$z)))
res$dd <- res$diff/(res$pool_sd)
get_d <- function(x){
v1 <- x[df$gender==1]
v2 <- x[df$gender==2]
mean_diff <- mean(v1)-mean(v2)
pool_sd <- sqrt((var(v1)+var(v2))/2)
d <- mean_diff/pool_sd
return(d)
}
get_d <- function(x){
v1 <- x[df$gender==1]
v2 <- x[df$gender==2]
mean_diff <- mean(v1)-mean(v2)
pool_sd <- sqrt((var(v1)+var(v2))/2)
d <- mean_diff/pool_sd
return(d)
}
obs <- c(get_d(df$O_sum),
get_d(df$C_sum),
get_d(df$E_sum),
get_d(df$A_sum),
get_d(df$N_sum))
res <- data.frame(cbind(lat, obs))
res
n_g <- c(sum(df$gender==1), sum(df$gender==2))
res$diff <- res$intercept-res$obs
res$var1 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$intercept^2 / (2*(n_g[1]+n_g[2])))
names(res)[1] <- "lat"
res
n_g <- c(sum(df$gender==1), sum(df$gender==2))
res$diff <- res$intercept-res$obs
res$diff <- res$lat-res$obs
res$var1 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$intercept^2 / (2*(n_g[1]+n_g[2])))
res$var1 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$lat^2 / (2*(n_g[1]+n_g[2])))
res$var2 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$obs^2 / (2*(n_g[1]+n_g[2])))
res$pool_sd <- sqrt((var1+var2)/2)
res$pool_sd <- sqrt((res$var1+res$var2)/2)
res$z <- res$diff/(res$pool_sd/sqrt(sum(n_g)))
res$p <- 2*(1-pnorm(abs(res$z)))
res$dd <- res$diff/(res$pool_sd)
res
res$var2 <- ((n_g[1]+n_g[2])/(n_g[1]*n_g[2])) + (res$obs^2 / (2*(n_g[1]+n_g[2])))
res
res$pool_sd <- sqrt((res$var1+res$var2)/2)
res$z <- res$diff/(res$pool_sd/sqrt(sum(n_g)))
res$p <- 2*(1-pnorm(abs(res$z)))
res$dd <- res$diff/(res$pool_sd)
res
table(df$E1)
#observed score vs latent score, gender diffs
rm(list=ls())
library(lavaan)
df <- read.csv("data.csv",sep = "\t")
df <- df[df$gender %in% c(1,2),]
df <- df[rowSums(df[,8:57]==0)==0,]
table(df$E1)
#observed score vs latent score, gender diffs
rm(list=ls())
library(lavaan)
df <- read.csv("data.csv", sep="\t")
df <- df[df$gender %in% c(1,2),]
table(df$E1)
df <- df[rowSums(df[,1:120]<1)==0,]
#recode items
model <- paste(
paste0("E =~ ", paste0("E",1:59," + ", collapse = ""), "E60"), "  \n ",
paste0("S =~ ", paste0("S",1:59," + ", collapse = ""), "S60"))
cat(model)
model <- paste0("E =~ ", paste0("E",1:59," + ", collapse = ""), "E60")
model <- paste0("S =~ ", paste0("S",1:59," + ", collapse = ""), "S60")
model
library(lavaan)
df <- read.csv("data.csv",sep = "\t")
df <- df[df$gender %in% c(1,2),]
df <- df[rowSums(df[,8:57]==0)==0,]
View(df)
#recode items
rec_vec <- c(2,4,6,8,10,12,14,22,24,26,28:30,32,34,36,38,42,44,46)
for (i in rec_vec) {
df[,i+7] <- (df[,i+7]-6)*(-1)
}
model <- "O =~ O1 + O2 + O3 + O4 + O5 + O6 + O7 + O8 + O9 + O10
C =~ C1 + C2 + C3 + C4 + C5 + C6 + C7 + C8 + C9 + C10
E =~ E1 + E2 + E3 + E4 + E5 + E6 + E7 + E8 + E9 + E10
A =~ A1 + A2 + A3 + A4 + A5 + A6 + A7 + A8 + A9 + A10
N =~ N1 + N2 + N3 + N4 + N5 + N6 + N7 + N8 + N9 + N10"
fit <- sem(model, df[1:500,], estimator="mlr", group = "gender", group.equal=c("loadings", "intercepts", "residuals"), std.lv=T, auto.fix.first=F)
lat <- lavInspect(fit, what="std")$`2`$alpha
lat
library(lavaan)
df <- read.csv("data.csv",sep = "\t")
df <- df[df$gender %in% c(1,2),]
df <- df[rowSums(df[,8:57]==0)==0,]
#recode items
rec_vec <- c(2,4,6,8,10,12,14,22,24,26,28:30,32,34,36,38,42,44,46)
for (i in rec_vec) {
df[,i+7] <- (df[,i+7]-6)*(-1)
}
model <- "O =~ O1 + O2 + O3 + O4 + O5 + O6 + O7 + O8 + O9 + O10
C =~ C1 + C2 + C3 + C4 + C5 + C6 + C7 + C8 + C9 + C10
E =~ E1 + E2 + E3 + E4 + E5 + E6 + E7 + E8 + E9 + E10
A =~ A1 + A2 + A3 + A4 + A5 + A6 + A7 + A8 + A9 + A10
N =~ N1 + N2 + N3 + N4 + N5 + N6 + N7 + N8 + N9 + N10"
